{"version":3,"sources":["webpack:///src/views/User/UserInfo.vue","webpack:///./src/views/User/UserInfo.vue?e0b5","webpack:///./src/views/User/UserInfo.vue"],"names":["computed","extends_default","Object","vuex_esm","userId","loadingUserInfo","loadingUser","_this","this","account","_this2","infoId","result","formData","avatar","username","job","address","tel","email","raw","file","isLt2M","_this3","status","msg","User_UserInfo","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","span","separator-class","to","path","_v","ref","model","userInfoForm","label-width","formLabelWidth","label","action","show-file-list","headers","flag","on-success","handleAvatarSuccess","before-upload","beforeAvatarUpload","src","userImageUrl","disabled","value","callback","$$v","$set","expression","type","on","click","updateInfo","native-type","staticRenderFns","Component","__webpack_require__","normalizeComponent","UserInfo","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.c382a4db17dc3afe98ee.js","sourcesContent":["<template>\n    <div class=\"UserInfo\">\n        <el-row class=\"source\">\n        <el-col :span=\"12\">\n            <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n                <el-breadcrumb-item :to=\"{ path: '/admin' }\">首页</el-breadcrumb-item>\n                <el-breadcrumb-item>员工基本资料</el-breadcrumb-item>\n            </el-breadcrumb>\n        </el-col>\n        </el-row>\n        <el-row>\n            <el-col :span=\"12\">\n                <el-form ref=\"userInfoForm\" :model=\"userInfoForm\"  :label-width=\"formLabelWidth\">\n                    <el-form-item label=\"上传头像\" class=\"upload-item\">\n                        <el-upload class=\"avatar-uploader\"\n                        action=\"/users/update/userInfo\"\n                        :show-file-list=\"false\"\n                        :headers=\"{flag: true}\"\n                        :on-success=\"handleAvatarSuccess\"\n                        :before-upload=\"beforeAvatarUpload\"\n                    >\n                        <img v-if=\"userImageUrl\" :src=\"userImageUrl\" class=\"avatar\">\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n                    </el-upload>\n                    </el-form-item>\n                    <el-form-item label=\"登录帐号\">\n                        <el-input v-model=\"userInfoForm.account\" :disabled=\"true\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"用户名\">\n                        <el-input v-model=\"userInfoForm.username\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"职业\">\n                        <el-input v-model=\"userInfoForm.job\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"居住地\">\n                        <el-input v-model=\"userInfoForm.address\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"联系电话\">\n                        <el-input v-model=\"userInfoForm.tel\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"邮箱\">\n                        <el-input v-model=\"userInfoForm.email\"></el-input>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"updateInfo\">保存</el-button>\n                        <el-button type=\"danger\" native-type=\"reset\">重置</el-button>\n                    </el-form-item>\n                </el-form>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n\nimport { mapState } from 'vuex'\n    export default {\n        data () {\n            return {\n                userInfoForm: {\n                    avatar: '',\n                    username: '',\n                    job: '',\n                    address: '',\n                    tel: '',\n                    email: '',\n                    account: ''\n                },\n                userAccount: '',\n                userImageUrl: '',\n                formLabelWidth: '120px'\n            }\n        },\n        computed: {\n            ...mapState([\n                    'userId'\n                ]),\n            userRole () {\n                return this.$store.state.userId\n            }\n        },\n        created () {\n            this.loadingUserInfo()\n            this.loadingUser()\n        },\n\n        methods: {\n            loadingUser () {\n                this.$ajax.get(`/users/${this.userId}`).then((res) => {\n                    if (res.data.status === '1') {\n                        this.userInfoForm.account = res.data.result.account\n                    }\n                })\n            },\n            loadingUserInfo () {\n                this.userInfoForm.infoId = this.$store.state.infoId\n                this.$ajax.get(`/users/userInfo/${this.userInfoForm.infoId}`).then(res => {\n                    if (res.data.status === '1') {\n                        let formData = res.data.result\n                        console.log('formData  ' + formData)\n                        this.userImageUrl = formData.avatar\n                        this.userInfoForm.username = formData.username\n                        this.userInfoForm.job = formData.job\n                        this.userInfoForm.address = formData.address\n                        this.userInfoForm.tel = formData.tel\n                        this.userInfoForm.email = formData.email\n                    }\n                })\n            },\n            handleAvatarSuccess (res, file) {\n                this.userImageUrl = URL.createObjectURL(file.raw)\n            },\n            beforeAvatarUpload (file) {\n                // const isJPG = file.type === 'image/jpeg'\n                this.userInfoForm.avatar = file\n                const isLt2M = file.size / 1024 / 1024 < 2\n\n                /* if (!isJPG) {\n                    this.$message.error('上传头像图片只能是 JPG 格式!')\n                } */\n                if (!isLt2M) {\n                    this.$message.error('上传头像图片大小不能超过 2MB!')\n                }\n                return isLt2M\n            },\n            updateInfo () {\n                this.userInfoForm.infoId = this.$store.state.infoId\n                this.$ajax.post(`/users/update/userInfo/${this.userInfoForm.infoId}`, this.userInfoForm).then(res => {\n                    console.log(res.data.status)\n                    if (res.data.status === '1') {\n                        this.$message({\n                            message: res.data.msg,\n                            type: 'success'\n                        })\n                        this.$store.commit('SET_USERNAME', res.data.result.username)\n                        this.$router.push('/admin/userList')\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .avatar-uploader {\n        /* margin-bottom: 20px; */\n    }\n    .avatar-uploader-icon {\n        border: 1px dashed #d9d9d9;\n        border-radius: 6px;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n        font-size: 28px;\n        color: #8c939d;\n        width: 78px;\n        height: 78px;\n        line-height: 178px;\n        text-align: center;\n    }\n    .avatar-uploader-icon:hover {\n        border-color: #409EFF;\n    }\n    .avatar {\n        width: 78px;\n        height: 78px;\n        display: block;\n    }\n    .upload-item{\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n        margin-top: 4rem;\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/User/UserInfo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"UserInfo\"},[_c('el-row',{staticClass:\"source\"},[_c('el-col',{attrs:{\"span\":12}},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/admin' }}},[_vm._v(\"首页\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"员工基本资料\")])],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form',{ref:\"userInfoForm\",attrs:{\"model\":_vm.userInfoForm,\"label-width\":_vm.formLabelWidth}},[_c('el-form-item',{staticClass:\"upload-item\",attrs:{\"label\":\"上传头像\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"/users/update/userInfo\",\"show-file-list\":false,\"headers\":{flag: true},\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.userImageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.userImageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"登录帐号\"}},[_c('el-input',{attrs:{\"disabled\":true},model:{value:(_vm.userInfoForm.account),callback:function ($$v) {_vm.$set(_vm.userInfoForm, \"account\", $$v)},expression:\"userInfoForm.account\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{model:{value:(_vm.userInfoForm.username),callback:function ($$v) {_vm.$set(_vm.userInfoForm, \"username\", $$v)},expression:\"userInfoForm.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"职业\"}},[_c('el-input',{model:{value:(_vm.userInfoForm.job),callback:function ($$v) {_vm.$set(_vm.userInfoForm, \"job\", $$v)},expression:\"userInfoForm.job\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"居住地\"}},[_c('el-input',{model:{value:(_vm.userInfoForm.address),callback:function ($$v) {_vm.$set(_vm.userInfoForm, \"address\", $$v)},expression:\"userInfoForm.address\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"联系电话\"}},[_c('el-input',{model:{value:(_vm.userInfoForm.tel),callback:function ($$v) {_vm.$set(_vm.userInfoForm, \"tel\", $$v)},expression:\"userInfoForm.tel\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"邮箱\"}},[_c('el-input',{model:{value:(_vm.userInfoForm.email),callback:function ($$v) {_vm.$set(_vm.userInfoForm, \"email\", $$v)},expression:\"userInfoForm.email\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateInfo}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"native-type\":\"reset\"}},[_vm._v(\"重置\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-6055ebab\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/User/UserInfo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.0@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6055ebab\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=styles&index=0!./UserInfo.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=script&index=0!./UserInfo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6055ebab\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.3.0@vue-loader/lib/selector?type=template&index=0!./UserInfo.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6055ebab\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/User/UserInfo.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}