webpackJsonp([5],{"b+yE":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("4YfN"),a=t.n(s),o=t("9rMa"),n={data:function(){return{userInfoForm:{avatar:"",username:"",job:"",address:"",tel:"",email:"",account:""},userAccount:"",userImageUrl:"",formLabelWidth:"120px"}},computed:a()({},Object(o.c)(["userId"]),{userRole:function(){return this.$store.state.userId}}),created:function(){this.loadingUserInfo(),this.loadingUser()},methods:{loadingUser:function(){var e=this;this.$ajax.get("/users/"+this.userId).then(function(r){"1"===r.data.status&&(e.userInfoForm.account=r.data.result.account)})},loadingUserInfo:function(){var e=this;this.userInfoForm.infoId=this.$store.state.infoId,this.$ajax.get("/users/userInfo/"+this.userInfoForm.infoId).then(function(r){if("1"===r.data.status){var t=r.data.result;console.log("formData  "+t),e.userImageUrl=t.avatar,e.userInfoForm.username=t.username,e.userInfoForm.job=t.job,e.userInfoForm.address=t.address,e.userInfoForm.tel=t.tel,e.userInfoForm.email=t.email}})},handleAvatarSuccess:function(e,r){this.userImageUrl=URL.createObjectURL(r.raw)},beforeAvatarUpload:function(e){this.userInfoForm.avatar=e;var r=e.size/1024/1024<2;return r||this.$message.error("上传头像图片大小不能超过 2MB!"),r},updateInfo:function(){var e=this;this.userInfoForm.infoId=this.$store.state.infoId,this.$ajax.post("/users/update/userInfo/"+this.userInfoForm.infoId,this.userInfoForm).then(function(r){console.log(r.data.status),"1"===r.data.status&&(e.$message({message:r.data.msg,type:"success"}),e.$store.commit("SET_USERNAME",r.data.result.username),e.$router.push("/admin/userList"))})}}},u={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"UserInfo"},[t("el-row",{staticClass:"source"},[t("el-col",{attrs:{span:12}},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[e._v("首页")]),e._v(" "),t("el-breadcrumb-item",[e._v("员工基本资料")])],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form",{ref:"userInfoForm",attrs:{model:e.userInfoForm,"label-width":e.formLabelWidth}},[t("el-form-item",{staticClass:"upload-item",attrs:{label:"上传头像"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/users/update/userInfo","show-file-list":!1,headers:{flag:!0},"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.userImageUrl?t("img",{staticClass:"avatar",attrs:{src:e.userImageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"登录帐号"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.userInfoForm.account,callback:function(r){e.$set(e.userInfoForm,"account",r)},expression:"userInfoForm.account"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{model:{value:e.userInfoForm.username,callback:function(r){e.$set(e.userInfoForm,"username",r)},expression:"userInfoForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"职业"}},[t("el-input",{model:{value:e.userInfoForm.job,callback:function(r){e.$set(e.userInfoForm,"job",r)},expression:"userInfoForm.job"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"居住地"}},[t("el-input",{model:{value:e.userInfoForm.address,callback:function(r){e.$set(e.userInfoForm,"address",r)},expression:"userInfoForm.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系电话"}},[t("el-input",{model:{value:e.userInfoForm.tel,callback:function(r){e.$set(e.userInfoForm,"tel",r)},expression:"userInfoForm.tel"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱"}},[t("el-input",{model:{value:e.userInfoForm.email,callback:function(r){e.$set(e.userInfoForm,"email",r)},expression:"userInfoForm.email"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.updateInfo}},[e._v("保存")]),e._v(" "),t("el-button",{attrs:{type:"danger","native-type":"reset"}},[e._v("重置")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=t("46Yf")(n,u,!1,function(e){t("iPf8")},"data-v-6055ebab",null);r.default=l.exports},iPf8:function(e,r){}});
//# sourceMappingURL=5.c382a4db17dc3afe98ee.js.map