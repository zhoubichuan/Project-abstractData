webpackJsonp([15],{CoGD:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("/o5o"),a=e("cMGX"),l={components:{modal:r.a,pagination:a.a},data:function(){return{total:0,pageCount:1,currentPage:1,pageSize:10,loadingFlag:!1,addModalFlag:!1,editModalFlag:!1,removeModalFlag:!1,tableData:[],productId:"",productForm:{productName:"",productGroup:"",productPrice:"",productNum:""},ProductEditForm:{productName:"",productGroup:"",productPrice:"",productNum:""},ruleForm:{productName:"",productGroup:"",productPrice:"",productNum:""},rules:{productName:[{required:!0,message:"请输入产品名称",trigger:"blur"}],productGroup:[{required:!0,message:"请输入产品系列名称",trigger:"blur"}],productNum:[{required:!0,message:"请输入产品数量",trigger:"blur"}]},formLabelWidth:"120px"}},watch:{},created:function(){this.loadData()},methods:{clickpageNum:function(t){console.log("pageCount  "+t)},handleSelectionChange:function(){},modalChange:function(){this.addModalFlag=!1,this.removeModalFlag=!1,this.editModalFlag=!1},showEditModal:function(t,o){this.editModalFlag=!0,this.ProductEditForm.productName=o.productName,this.ProductEditForm.productGroup=o.productGroup,this.ProductEditForm.productPrice=o.productPrice,this.ProductEditForm.productNum=o.productNum,this.productId=o._id},showRemoveModal:function(t,o){this.removeModalFlag=!0,this.productId=o._id},loadData:function(){var t=this;this.loadingFlag=!0,this.$ajax.get("/product/").then(function(o){t.loadingFlag=!1;var e=o.data.result;t.total=o.data.result.length,t.tableData=e})},addProduct:function(t){var o=this;this.$refs[t].validate(function(t){if(!t)return!1;""!=o.productForm.productName&&o.$ajax.post("/product/add",o.productForm).then(function(t){"1"===t.data.status?(o.$message({message:t.data.msg,type:"success"}),o.loadData(),o.addModalFlag=!1,o.resetForm("ProductEditForm")):o.$message.error(t.data.msg)})})},editProduct:function(t){var o=this;this.$refs[t].validate(function(t){t&&o.$ajax.post("/product/update/"+o.productId,o.ProductEditForm).then(function(t){console.log("product edit   "+t),"200"===t.status&&o.$message({message:"修改成功",type:"success"}),o.loadData(),o.editModalFlag=!1,o.resetForm("ProductEditForm")})})},handleDelete:function(){var t=this;this.$ajax.delete("/product/del/"+this.productId).then(function(o){"1"===o.data.status?(t.$message({message:o.data.msg,type:"success"}),t.loadData(),t.removeModalFlag=!1):(t.$message.error(o.data.msg),t.removeModalFlag=!1)})},resetForm:function(t){var o=this;this.$nextTick(function(){o.$refs[t].resetFields()})}}},d={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("el-row",{staticClass:"source"},[e("el-col",{attrs:{span:12}},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),e("el-breadcrumb-item",[t._v("产品列表")])],1)],1),t._v(" "),e("el-col",{attrs:{span:1,offset:10}},[e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(o){t.addModalFlag=!0}}},[t._v("添加")])],1)],1),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingFlag,expression:"loadingFlag"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:t.tableData,stripe:""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{prop:"productName",label:"产品名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"productGroup",label:"产品系列"}}),t._v(" "),e("el-table-column",{attrs:{prop:"productPrice",label:"产品单价(元)"}}),t._v(" "),e("el-table-column",{attrs:{prop:"productNum",label:"产品数量(袋)"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"400"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.showEditModal(o.$index,o.row)}}},[t._v("编辑")]),t._v(" "),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.showRemoveModal(o.$index,o.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),e("pagination",{attrs:{total:t.total,pageCount:t.pageCount,currentPage:t.currentPage,pageSize:t.pageSize},on:{clickpageNum:t.clickpageNum}}),t._v(" "),e("modal",{attrs:{dialogFormVisible:t.addModalFlag,title:"新增"},on:{modalToggle:t.modalChange}},[e("el-form",{ref:"productForm",attrs:{slot:"content",model:t.productForm,rules:t.rules,"label-width":t.formLabelWidth},slot:"content"},[e("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[e("el-input",{model:{value:t.productForm.productName,callback:function(o){t.$set(t.productForm,"productName",o)},expression:"productForm.productName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"产品系列",prop:"productGroup"}},[e("el-input",{model:{value:t.productForm.productGroup,callback:function(o){t.$set(t.productForm,"productGroup",o)},expression:"productForm.productGroup"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"产品单价",prop:"productPrice"}},[e("el-input",{model:{value:t.productForm.productPrice,callback:function(o){t.$set(t.productForm,"productPrice",o)},expression:"productForm.productPrice"}},[e("template",{attrs:{slot:"append"},slot:"append"},[t._v("元")])],2)],1),t._v(" "),e("el-form-item",{attrs:{label:"产品数量",prop:"productNum"}},[e("el-input",{model:{value:t.productForm.productNum,callback:function(o){t.$set(t.productForm,"productNum",o)},expression:"productForm.productNum"}},[e("template",{attrs:{slot:"append"},slot:"append"},[t._v("袋")])],2)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"danger","native-type":"reset"},on:{click:function(o){t.resetForm("productForm")}}},[t._v("重置")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(o){t.addProduct("productForm")}}},[t._v("保存")])],1)],1),t._v(" "),e("modal",{attrs:{dialogFormVisible:t.editModalFlag,title:"编辑"},on:{modalToggle:t.modalChange}},[e("el-form",{ref:"ProductEditForm",attrs:{slot:"content",model:t.ProductEditForm,"label-width":t.formLabelWidth},slot:"content"},[e("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[e("el-input",{model:{value:t.ProductEditForm.productName,callback:function(o){t.$set(t.ProductEditForm,"productName",o)},expression:"ProductEditForm.productName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"产品系列",prop:"productGroup"}},[e("el-input",{model:{value:t.ProductEditForm.productGroup,callback:function(o){t.$set(t.ProductEditForm,"productGroup",o)},expression:"ProductEditForm.productGroup"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"产品单价",prop:"productPrice"}},[e("el-input",{model:{value:t.ProductEditForm.productPrice,callback:function(o){t.$set(t.ProductEditForm,"productPrice",o)},expression:"ProductEditForm.productPrice"}},[e("template",{attrs:{slot:"append"},slot:"append"},[t._v("元")])],2)],1),t._v(" "),e("el-form-item",{attrs:{label:"产品数量",prop:"productNum"}},[e("el-input",{model:{value:t.ProductEditForm.productNum,callback:function(o){t.$set(t.ProductEditForm,"productNum",o)},expression:"ProductEditForm.productNum"}},[e("template",{attrs:{slot:"append"},slot:"append"},[t._v("袋")])],2)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"danger","native-type":"reset"},on:{click:function(o){t.resetForm("ProductEditForm")}}},[t._v("重置")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(o){t.editProduct("ProductEditForm")}}},[t._v("保存")])],1)],1),t._v(" "),e("modal",{attrs:{dialogFormVisible:t.removeModalFlag},on:{modalToggle:t.modalChange}},[e("p",{staticStyle:{"text-align":"center","font-size":"20px"},attrs:{slot:"content"},slot:"content"},[t._v("\n              是否删除？\n          ")]),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.modalChange}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"danger"},on:{click:t.handleDelete}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]},c=e("46Yf")(l,d,!1,null,null,null);o.default=c.exports}});
//# sourceMappingURL=15.ede56f19bca6b1ec589d.js.map